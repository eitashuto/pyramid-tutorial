<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal">
<head>
  <title>Whodunit!</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
  <meta name="keywords" content="python web application" />
  <meta name="description" content="pyramid web application" />
  <link rel="shortcut icon"
        href="${request.static_url('tutorial:static/favicon.ico')}" />
  <link rel="stylesheet"
        href="${request.static_url('tutorial:static/pylons.css')}"
        type="text/css" media="screen" charset="utf-8" />
  <!--[if lte IE 6]>
  <link rel="stylesheet"
        href="${request.static_url('tutorial:static/ie6.css')}"
        type="text/css" media="screen" charset="utf-8" />
  <![endif]-->
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script type="text/javascript">
        $(document).ready(function(){
            var data = ${book_titles}
            $("#book_hint").autocomplete({source:data});
        	$("#book_hint").change(function(){
        	    val1 = $("#book_hint").val();
        		//$("#input_val").text($("#book_hint").val())
        		//alert(val1);
              	$.ajax({
            		url: "./books_info",
                    //url: "http://www.renowan.com/blog/flash/20110511_ajax/getAr.php"
            		type: "POST",
            		//data: { val : ''},
            		//dataType: 'json',
            		success: function(arr) {
            		    $("#input_val").text(arr);
            			//alert("OK!!!");
            			var arr = JSON.parse(arr);
            			$.each(arr, function(key,val){$("#input_val").text(val)})
                	    //$("#input_val").text(arr);
            		},
            		error: function(XMLHttpRequest, textStatus, errorThrown) {
            			alert(textStatus);
            		}
            	});
        	});
        });
        
  </script>
</head>
<body>
  <div id="wrap">
    <div id="top-small">
      <div class="top-small align-center">
        <div>
          <img width="220" height="50" alt="pyramid"
        src="${request.static_url('tutorial:static/pyramid-small.png')}" />
        </div>
      </div>
    </div>
    <div id="middle">
      <div class="middle align-right">
        <div id="left" class="app-welcome align-left">
                       タイトルか著者名をどうぞ！
          <p ><input type="text" id="book_hint"/></p>
          <p id="input_val" value="hoge">fff</p>
        </div>
      </div>
    </div>
    <div id="bottom">
    </div>
  </div>
  <div id="footer">
    <div class="footer">2013, Whodunit</div>
  </div>
</body>
</html>